<?xml version="1.0" encoding="utf-8" ?>
<problem
   package = "unix.files"
   id = "binary-tree-2"
   type = "standard">
  <statement language="ru_RU">
    <description>

<p>
В аргументах командной строки задается имя входного бинарного файла произвольного доступа. Бинарный файл рассматривается как массив структур:</p>
<p><tt><pre>struct Node
{
    int32_t key;
    int32_t left_idx;
    int32_t right_idx;
};</pre></tt></p>

<p>Структура описывает вершину бинарного дерева поиска, где <tt>key</tt> – ключ поиска,
   а значения <tt>left_idx</tt> и <tt>right_idx</tt> – индексы в массиве соответственно левой и правой вершины.
   Корень дерева находится в элементе массива с индексом 0. Признаком отсутствия соответствующего поддерева в вершине является индекс, равный 0.</p>
<p>Числа в файле хранятся в естественном для x86 представлении (little-endian).</p>

<p>На стандартный поток вывода напечатайте ключи, размещенные в данном дереве, в порядке убывания.</p>
<p>Считывать содержимое всего файла в память целиком (хранить полное дерево в памяти) запрещается.
   Для чтения содержимого файла необходимо пользоваться низкоуровневым вводом-выводом (open/read/etc).
   Корректная работа на big-endian архитектуре не требуется. Не используйте низкоуровневые манипуляции с памятью (union, приведение типов указателей).
   Не используйте библиотечные функции преобразования.</p>

<p>Для вывода ключей можно использовать высокоуровневые потоки (stdout).</p>

<p>Не забывайте выводить '\n' в конце вывода.</p>

<p>В программе должна быть реализована проверка корректности чтения из файла. Минимизируйте число системных вызовов, необходимых для чтения одной записи из файла.</p>

    </description>
  </statement>
<review_comments>
  <comment>Неправильная проверка корректности чтения из файла</comment>
<comment>Слишком много системных вызовов, оптимизируйте</comment>
<comment>используйте sizeof(value) а не sizeof(type)</comment>
<comment>Проверяйте, что из файла считали не меньше, чем запросили</comment>
<comment>Для небольших буферов фиксированного размера использовать динамическую память неэффективно</comment>
<comment>Не проверяется успешность системных вызовов</comment>
<comment>Неправильная проверка результата read</comment>
<comment>Не используйте низкоуровневые манипуляции с памятью</comment>
</review_comments>
</problem>
